{"version":3,"sources":["../../../src/components/VCalendar/VCalendarWeekly.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport '../../stylus/components/_calendar-weekly.styl'\n\n// Types\nimport { VNode, VNodeChildren } from 'vue'\n\n// Mixins\nimport CalendarBase from './mixins/calendar-base'\n\n// Util\nimport props from './util/props'\nimport {\n  VTimestamp,\n  VTimestampFormatter,\n  createDayList,\n  getDayIdentifier,\n  createNativeLocaleFormatter\n} from './util/timestamp'\n\n/* @vue/component */\nexport default CalendarBase.extend({\n  name: 'v-calendar-weekly',\n\n  props: props.weeks,\n\n  computed: {\n    staticClass (): string {\n      return 'v-calendar-weekly'\n    },\n    classes (): object {\n      return this.themeClasses\n    },\n    parsedMinWeeks (): number {\n      return parseInt(this.minWeeks)\n    },\n    days (): VTimestamp[] {\n      const minDays = this.parsedMinWeeks * this.weekdays.length\n      const start = this.getStartOfWeek(this.parsedStart)\n      const end = this.getEndOfWeek(this.parsedEnd)\n\n      return createDayList(\n        start,\n        end,\n        this.times.today,\n        this.weekdaySkips,\n        Number.MAX_SAFE_INTEGER,\n        minDays\n      )\n    },\n    todayWeek (): VTimestamp[] {\n      const today = this.times.today\n      const start = this.getStartOfWeek(today)\n      const end = this.getEndOfWeek(today)\n\n      return createDayList(\n        start,\n        end,\n        today,\n        this.weekdaySkips,\n        this.weekdays.length,\n        this.weekdays.length\n      )\n    },\n    monthFormatter (): VTimestampFormatter {\n      if (this.monthFormat) {\n        return this.monthFormat as VTimestampFormatter\n      }\n\n      const longOptions = { timeZone: 'UTC', month: 'long' }\n      const shortOptions = { timeZone: 'UTC', month: 'short' }\n\n      return createNativeLocaleFormatter(\n        this.locale,\n        (_tms, short) => short ? shortOptions : longOptions\n      )\n    }\n  },\n\n  methods: {\n    isOutside (day: VTimestamp): boolean {\n      const dayIdentifier = getDayIdentifier(day)\n\n      return dayIdentifier < getDayIdentifier(this.parsedStart) ||\n             dayIdentifier > getDayIdentifier(this.parsedEnd)\n    },\n    genHead (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-calendar-weekly__head'\n      }, this.genHeadDays())\n    },\n    genHeadDays (): VNode[] {\n      return this.todayWeek.map(this.genHeadDay)\n    },\n    genHeadDay (day: VTimestamp, index: number): VNode {\n      const outside = this.isOutside(this.days[index])\n      const color = day.present ? this.color : undefined\n\n      return this.$createElement('div', this.setTextColor(color, {\n        key: day.date,\n        staticClass: 'v-calendar-weekly__head-weekday',\n        class: this.getRelativeClasses(day, outside)\n      }), this.weekdayFormatter(day, this.shortWeekdays))\n    },\n    genWeeks (): VNode[] {\n      const days = this.days\n      const weekDays = this.weekdays.length\n      const weeks: VNode[] = []\n      for (let i = 0; i < days.length; i += weekDays) {\n        weeks.push(this.genWeek(days.slice(i, i + weekDays)))\n      }\n\n      return weeks\n    },\n    genWeek (week: VTimestamp[]): VNode {\n      return this.$createElement('div', {\n        key: week[0].date,\n        staticClass: 'v-calendar-weekly__week'\n      }, week.map(this.genDay))\n    },\n    genDay (day: VTimestamp): VNode {\n      const outside = this.isOutside(day)\n      const slot = this.$scopedSlots.day\n      const slotData = { outside, ...day }\n      const hasMonth = day.day === 1 && this.showMonthOnFirst\n\n      return this.$createElement('div', {\n        key: day.date,\n        staticClass: 'v-calendar-weekly__day',\n        class: this.getRelativeClasses(day, outside),\n        on: this.getDefaultMouseEventHandlers(':day', _e => day)\n      }, [\n        this.genDayLabel(day),\n        hasMonth ? this.genDayMonth(day) : '',\n        slot ? slot(slotData) : ''\n      ])\n    },\n    genDayLabel (day: VTimestamp): VNode {\n      const color = day.present ? this.color : undefined\n      const slot = this.$scopedSlots.dayLabel\n\n      return this.$createElement('div', this.setTextColor(color, {\n        staticClass: 'v-calendar-weekly__day-label',\n        on: this.getMouseEventHandlers({\n          'click:date': { event: 'click', stop: true },\n          'contextmenu:date': { event: 'contextmenu', stop: true, prevent: true, result: false }\n        }, _e => day)\n      }), slot ? slot(day) as VNodeChildren : this.dayFormatter(day, false))\n    },\n    genDayMonth (day: VTimestamp): VNode | string {\n      const color = day.present ? this.color : undefined\n      const slot = this.$scopedSlots.dayMonth\n\n      return this.$createElement('div', this.setTextColor(color, {\n        staticClass: 'v-calendar-weekly__day-month'\n      }), slot ? slot(day) as VNodeChildren : this.monthFormatter(day, this.shortMonths))\n    }\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: this.staticClass,\n      class: this.classes,\n      nativeOn: {\n        dragstart: (e: MouseEvent) => {\n          e.preventDefault()\n        }\n      }\n    }, [\n      !this.hideHeader ? this.genHead() : '',\n      ...this.genWeeks()\n    ])\n  }\n})\n"],"sourceRoot":""}